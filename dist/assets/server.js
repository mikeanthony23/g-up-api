const mongoose=require("mongoose"),dotenv=require("dotenv"),app=require("./app"),port=process.env.PORT||3e3;process.on("uncaughtException",(o=>{console.log(o),console.log("UNCAUGHT EXCEPTION.... Shutting Down"),process.exit(1)})),dotenv.config({path:"./config.env"}),async function(){try{await mongoose.connect("mongodb+srv://mikeanthony595:mikeanthony595@g-up.3dxfsmr.mongodb.net/g-up?retryWrites=true&w=majority")&&console.log("Successfully connected to Database!")}catch(o){console.log(o)}}();const server=app.listen(port,(()=>{console.log(`server running on port ${port}`)}));process.on("unhandledRejection",(o=>{console.log(o.name,o.message),console.log("UNHANDLED REJECTION.... Shutting Down"),server.close((()=>{process.exit(1)}))})),process.on("SIGTERM",(()=>{console.log("SIGTERM RECIEVED SHutting down gracefully"),server.close((()=>{console.log("Process terminated!")}))}));