const express=require("express"),morgan=require("morgan"),rateLimit=require("express-rate-limit"),helmet=require("helmet"),mongoSanitize=require("express-mongo-sanitize"),xss=require("xss-clean"),cookieParser=require("cookie-parser"),compression=require("compression"),cors=require("cors"),userRoutes=require("./routes/userRoutes"),reportRoutes=require("./routes/reportRoutes"),app=express();app.use(helmet()),app.use(cors()),app.options("*",cors());const limiter=rateLimit({max:100,windowMs:36e5,message:"Too many requests from this IP, please try again in an hour!"});app.use("/api",limiter),app.use(express.json({limit:"10kb"})),app.use(express.urlencoded({extended:!0,limit:"10kb"})),app.use(cookieParser()),app.use(mongoSanitize()),app.use(xss()),app.use(compression()),app.use("/api/v1/users",userRoutes),app.use("/api/v1/reports",reportRoutes),"development"===process.env.NODE_ENV&&app.use(morgan("dev")),module.exports=app;